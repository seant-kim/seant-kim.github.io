import{i as a,b as s,S as d,t as n,u as k,c as p,o as B,g as E,d as D,h as I,j as L,D as N,s as x}from"./index-YcIw2Huw.js";import{a as j,b as A,s as F,f as O,l as b,E as q,T as w}from"./dedit-DxgKloju.js";import{V as C,a as y}from"./amount-vw-qtCFSjno.js";import{b as g}from"./bitwise-NspCAD-Q.js";import{T as $,y as M}from"./checkset-Ds8Ko24I.js";var P=n("<div class=m-1><span class=small-italic-tag>出租方"),z=n("<div class=m-1><span class=small-italic-tag>承租方"),G=n("<div class=m-1><span class=small-italic-tag>月租"),H=n("<div class=m-1><span class=small-italic-tag>押金"),J=n("<span class=small-italic-tag>电器"),v=n("<span>"),K=n("<span class=small-italic-tag>允许"),S=n('<div class="m-1 flex flex-row gap-2"><div class="flex-1 flex flex-col"></div><div class="flex-none flex flex-col">'),Q=n("<span class=small-italic-tag>杂费"),R=n("<span class=small-italic-tag>设施"),U=n('<div class="m-1 flex flex-row gap-4"><div class="flex flex-col"><span class=small-italic-tag>起始日期</span><span></span></div><div class="flex flex-col"><span class=small-italic-tag>租期</span><span>个月</span></div><div class="flex flex-col"><span class=small-italic-tag>付款周期</span><span>个月'),W=n("<span class=small-italic-tag>附加条款"),X=n('<div class="m-1 flex flex-col">'),Y=n('<div class="m-1 p-1">');const Z=t=>(()=>{var c=Y();return a(c,s($,{get children(){return[(()=>{var l=P();return l.firstChild,a(l,s(C,{get val(){return t.val.lessor},class:""}),null),l})(),(()=>{var l=z();return l.firstChild,a(l,s(C,{get val(){return t.val.lessee},class:""}),null),l})()]}}),null),a(c,s($,{get children(){return[(()=>{var l=G();return l.firstChild,a(l,s(y,{get val(){return t.val.monthly},class:""}),null),l})(),(()=>{var l=H();return l.firstChild,a(l,s(y,{get val(){return t.val.deposit},class:""}),null),l})()]}}),null),a(c,s($,{get children(){return[(()=>{var l=S(),r=l.firstChild,u=r.nextSibling;return a(r,s(d,{get when(){return t.val.applias>0},get children(){return[J(),(()=>{var i=v();return a(i,()=>g(t.val.applias,j)),i})()]}})),a(u,s(d,{get when(){return t.val.allows>0},get children(){return[K(),(()=>{var i=v();return a(i,()=>g(t.val.allows,A)),i})()]}})),l})(),(()=>{var l=S(),r=l.firstChild,u=r.nextSibling;return a(r,s(d,{get when(){return t.val.feeBits>0},get children(){return[Q(),(()=>{var i=v();return a(i,()=>g(t.val.feeBits,F)),i})()]}})),a(u,s(d,{get when(){return t.val.facilis>0},get children(){return[R(),(()=>{var i=v();return a(i,()=>g(t.val.facilis,O)),i})()]}})),l})()]}}),null),a(c,s($,{get children(){return[(()=>{var l=U(),r=l.firstChild,u=r.firstChild,i=u.nextSibling,m=r.nextSibling,o=m.firstChild,e=o.nextSibling,f=e.firstChild,_=m.nextSibling,T=_.firstChild,h=T.nextSibling,V=h.firstChild;return a(i,()=>M(t.val.fromDay)),a(e,()=>t.val.tenancy,f),a(h,()=>t.val.payCyc,V),l})(),(()=>{var l=X();return a(l,s(d,{get when(){return t.val.extrall.length>0},get children(){return[W(),(()=>{var r=v();return a(r,()=>t.val.extrall),r})()]}})),l})()]}}),null),c})(),ll=Z;var el=n('<p class="px-2 py-1 absolute top-2 left-8">房屋租赁'),al=n('<p class="mx-2 my-1 px-2 py-1">'),tl=n('<nav class="absolute top-2 right-2 flex-row-vcenter">'),sl=n('<div class="m-2 p-2 flex items-center justify-center">Loading ...'),rl=n('<div><nav class="absolute top-2 right-2 flex-row-vcenter">');const dl=()=>{const t=k(),[c,l]=p(b),[r,u]=p(),i=()=>{const e=new w(c());return e.isValid()&&!e.isEqual(b)},m=()=>{if(r()){const e={...r(),lease:new w(c()).entity};x(Number.parseInt(t.fid),e).then(()=>{u(e)}).catch(f=>console.error("create flat failed",f))}},o=()=>{if(r()){const e={...r(),lease:void 0};x(Number.parseInt(t.fid),e).then(()=>{u(e)}).catch(f=>console.error("clear flat buysell failed",f))}};return B(()=>{t.fid&&E(Number.parseInt(t.fid)).then(e=>u(e)).catch(e=>console.error("get flat failed",e))}),[el(),s(d,{get when(){return r()},get fallback(){return sl()},get children(){return[(()=>{var e=al();return a(e,()=>r().address),e})(),s(d,{get when(){return r().lease},get fallback(){return(()=>{var e=rl(),f=e.firstChild;return a(e,s(q,{get val(){return c()},cb:_=>l(_)}),f),a(f,s(d,{get when(){return i()},get children(){return s(D,{label:"保存",onClick:m})}})),e})()},get children(){return[s(ll,{get val(){return r().lease}}),(()=>{var e=tl();return a(e,s(I,{label:"清除",onClick:()=>o()}),null),a(e,s(L,{label:"修改",get href(){return`/${t.fid}/led`}}),null),a(e,s(N,{label:"协议",get href(){return`/${t.fid}/lease`}}),null),e})()]}})]}})]};export{dl as default};
