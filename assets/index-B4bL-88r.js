import{i as t,b as a,S as u,t as n,u as y,c as g,o as S,g as T,d as V,h as k,j as B,D as E,s as $}from"./index-YcIw2Huw.js";import{a as D,f as I,b as h,E as N,T as p}from"./dedit-Bx2Rdovw.js";import{T as d,y as j}from"./checkset-Ds8Ko24I.js";import{V as _,a as v}from"./amount-vw-qtCFSjno.js";import{b}from"./bitwise-NspCAD-Q.js";var A=n("<div class=m-1><span class=small-italic-tag>卖方"),O=n("<div class=m-1><span class=small-italic-tag>买方"),q=n("<div class=m-1><span class=small-italic-tag>成交价"),F=n("<div class=m-1><span class=small-italic-tag>定金"),L=n("<div class=m-1><span class=small-italic-tag>尾款"),M=n("<span class=small-italic-tag>家电"),o=n("<span>"),P=n('<div class="flex-1 flex flex-col">'),z=n("<span class=small-italic-tag>家具"),G=n('<div class="flex-none flex flex-col">'),H=n('<div class="m-1 flex flex-row gap-4"><div class="flex flex-col"><span class=small-italic-tag>起始日期</span><span>'),J=n("<span class=small-italic-tag>附加条款"),K=n('<div class="m-1 flex flex-col">'),Q=n('<div class="m-1 p-1">');const R=r=>(()=>{var i=Q();return t(i,a(d,{get children(){return[(()=>{var l=A();return l.firstChild,t(l,a(_,{get val(){return r.val.vendor},class:""}),null),l})(),(()=>{var l=O();return l.firstChild,t(l,a(_,{get val(){return r.val.vendee},class:""}),null),l})()]}}),null),t(i,a(d,{get children(){return[(()=>{var l=q();return l.firstChild,t(l,a(v,{get val(){return r.val.hammer},class:""}),null),l})(),(()=>{var l=F();return l.firstChild,t(l,a(v,{get val(){return r.val.earnest},class:""}),null),l})()]}}),null),t(i,a(d,{get children(){var l=L();return l.firstChild,t(l,a(v,{get val(){return r.val.balance},class:""}),null),l}}),null),t(i,a(d,{get children(){return[(()=>{var l=P();return t(l,a(u,{get when(){return r.val.applias>0},get children(){return[M(),(()=>{var s=o();return t(s,()=>b(r.val.applias,D)),s})()]}})),l})(),(()=>{var l=G();return t(l,a(u,{get when(){return r.val.furnits>0},get children(){return[z(),(()=>{var s=o();return t(s,()=>b(r.val.furnits,I)),s})()]}})),l})()]}}),null),t(i,a(d,{get children(){return[(()=>{var l=H(),s=l.firstChild,m=s.firstChild,f=m.nextSibling;return t(f,()=>j(r.val.fromDay)),l})(),(()=>{var l=K();return t(l,a(u,{get when(){return r.val.extrall.length>0},get children(){return[J(),(()=>{var s=o();return t(s,()=>r.val.extrall),s})()]}})),l})()]}}),null),i})(),U=R;var W=n('<p class="px-2 py-1 absolute top-2 left-8">房屋买卖'),X=n('<p class="mx-2 my-1 px-2 py-1">'),Y=n('<nav class="absolute top-2 right-2 flex-row-vcenter">'),Z=n('<div class="m-2 p-2 flex items-center justify-center">Loading ...'),ll=n('<div><nav class="absolute top-2 right-2 flex-row-vcenter">');const nl=()=>{const r=y(),[i,l]=g(h),[s,m]=g(),f=()=>{const e=new p(i());return e.isValid()&&!e.isEqual(h)},x=()=>{if(s()){const e={...s(),bsell:new p(i()).entity};$(Number.parseInt(r.fid),e).then(()=>{m(e)}).catch(c=>console.error("create flat failed",c))}},w=()=>{if(s()){const e={...s(),bsell:void 0};$(Number.parseInt(r.fid),e).then(()=>{m(e)}).catch(c=>console.error("clear flat buysell failed",c))}};return S(()=>{r.fid&&T(Number.parseInt(r.fid)).then(e=>m(e)).catch(e=>console.error("get flat failed",e))}),[W(),a(u,{get when(){return s()},get fallback(){return Z()},get children(){return[(()=>{var e=X();return t(e,()=>s().address),e})(),a(u,{get when(){return s().bsell},get fallback(){return(()=>{var e=ll(),c=e.firstChild;return t(e,a(N,{get val(){return i()},cb:C=>l(C)}),c),t(c,a(u,{get when(){return f()},get children(){return a(V,{label:"保存",onClick:x})}})),e})()},get children(){return[a(U,{get val(){return s().bsell}}),(()=>{var e=Y();return t(e,a(k,{label:"清除",onClick:()=>w()}),null),t(e,a(B,{label:"修改",get href(){return`/${r.fid}/bed`}}),null),t(e,a(E,{label:"协议",get href(){return`/${r.fid}/bsell`}}),null),e})()]}})]}})]};export{nl as default};
