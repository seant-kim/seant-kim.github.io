import{u as $,a as w,c as f,o as _,g as k,f as d,b as r,i as p,S as g,B as y,d as C,E as S,t as n,T as m,s as x}from"./index-YcIw2Huw.js";var B=n('<p class="px-2 py-1 absolute top-2 left-8">编辑房屋信息'),E=n('<nav class="absolute top-2 right-2 flex-row-vcenter">'),N=n('<div class="m-1 p-1">'),O=n("<div>Loading ...");const I=()=>{const a=$(),o=w(),[v,i]=f(),[s,l]=f(),b=()=>{const e=new m(s());return e.isValid()&&!e.isEqual(v())};_(()=>{if(a.fid){const e=Number.parseInt(a.fid);k(e).then(t=>{i(t),l(t)}).catch(t=>console.error("get flat failed",t))}else i(d),l(d)});const c=e=>{if(e){const t=new m(s()),u=a.fid?Number.parseInt(a.fid):Date.now();x(u,t.entity).then(()=>{o(`/${u}`,{replace:!0})}).catch(h=>console.error("upsert flat failed",h))}else o(`/${a.fid||""}`,{replace:!0})};return[B(),r(g,{get when(){return s()},get fallback(){return O()},get children(){return[(()=>{var e=E();return p(e,r(g,{get when(){return b()},get fallback(){return r(y,{label:"取消",onClick:()=>c(!1)})},get children(){return r(C,{label:"保存",onClick:()=>c(!0)})}})),e})(),(()=>{var e=N();return p(e,r(S,{get val(){return s()},cb:l})),e})()]}})]};export{I as default};
