import{i as s,b as i,F as S,t as p,u as P,c as f,o as q,g as D,k as j,S as g,l as z,d as G,B as H,s as J}from"./index-YcIw2Huw.js";import{y as K}from"./checkset-Ds8Ko24I.js";import{s as Q,a as R,f as U,E as W,T as B}from"./dedit-DxgKloju.js";import{b as m}from"./bitwise-NspCAD-Q.js";import{V as F}from"./person-ag-CBdkssQE.js";class X{constructor(t){this.articles=[];const a=`租金由乙方入住前全额支付，共￥${t.payCyc*t.monthly.numeral}元。`,n=t.tenancy/t.payCyc,r=t.tenancy%t.payCyc;let c=`租金支付周期为${t.payCyc}个月, 每期￥${t.monthly.numeral*t.payCyc}元, 乙方需期前支付`;c+=r?`, 最后一期付${r}个月租金￥${t.monthly.numeral*r}元。`:`, 共分${n}期。`,this.articles.push({k:"权责与用途",v:["甲方作为出租方将房屋出租给乙方, 并作为出租方保证房屋无纠纷、负责协调社区事务、保障房屋的正常使用。","乙方作为承租方租借此房屋用于个人居住，并承诺未经甲方允许，不会改变房屋用途。",`${(t.allows&2)>0?"乙方可以在承担管理责任的情况下将房屋转租给第三方，转租截止期不能超过本协议截止期，本协议结束前乙方需及时清退第三方租户， 。":"乙方将以整租的方式承租，未经甲方允许，乙方不得将房屋转租给第三方。"}`]}),this.articles.push({k:"租期",v:[`租期从${K(t.fromDay)}起算, 共${t.tenancy}个月。`,`如双方在租期结束前都未提出解约要求，则依此协议双方续约${t.payCyc}个月， 以后依次类推。
                如一方无意续约，需在租期结束前，提前至少半个月通知对方解约。`]}),this.articles.push({k:"租金与押金",v:[`双方议定月租金为￥${t.monthly.numeral}元(${t.monthly.sinoNum}),
                ${t.payCyc===t.tenancy?a:c}`,`乙方在入住前支付押金￥${t.deposit.numeral}元（${t.deposit.sinoNum}），用于保证协议的正常履行。
                租期内，如乙方提前解约或因乙方的过错致双方解约（甲方无责），押金可作为乙方的违约金赔偿给甲方，
                如甲方提前解约或因甲方的过错致双方解约（乙方无责），甲方返还押金并另外支付与押金等额的赔偿给乙方。`,"如乙方未能及时缴纳租金或押金，且甲方催缴无果，则按乙方违约处理, 迟缴超过两周，甲方可解约并扣留押金作为补偿。"]}),this.articles.push({k:"杂费",v:[t.feeBits?`租期内，乙方负责缴纳的费用包括${m(t.feeBits,Q)}，拖缴费用的后果由乙方承担。未列明的其他费用由甲方支付。`:"租期内，甲方负责支付与房屋有关的各种杂费。如甲方未及时缴纳应缴费用并影响到乙方的生活，乙方可自行缴纳并向甲方索偿。"]}),this.articles.push({k:"电器与设施",v:[t.applias?`甲方提供${m(t.applias,R)}并负责相关维修, 
                    如甲方不能及时履行维修责任, 乙方有权自行维修并由甲方承担费用。`:"甲方不提供电器，也不对乙方自备的电器设施提供保障维修。",t.facilis?`甲方提供${m(t.facilis,U)}设施供乙方使用并提供维修。`:"",(t.allows&1)>0?"甲方允许乙方在不影响房屋结构的情况下对房屋内部做装修或维修，水电管线等设施出现的问题由乙方自行解决。":"甲方不允许乙方对房屋内部做装修或维修，水电管线等设施出现的问题由甲方负责解决。"]}),this.articles.push({k:"违规与免责",v:["乙方由于自身的原因造成的人身安全或意外事故，责任与赔偿需自行承担。","乙方不得在周边滋事扰民、如发生高空抛物、打架斗殴等事件，从事黄赌毒等犯罪活动，甲方有权解约并由乙方担责。"]}),this.articles.push({k:"解约与退款",v:["租期内，如果因不可抗的原因致使双方无法继续履约，各方无需承担违约责任，但甲方应退还押金及部分已收取的租金(按履约日期计算比例)。","如甲方或乙方提前解约，甲方应退还部分已收取的租金，押金按前述《租金与押金》条款处理。","如乙方转租给第三方，在租期结束时未及时清退第三方租户的情况下，甲方将按日计算加倍收取租金。","租期结束时，甲方收回房屋并退还押金给乙方, 乙方搬离，留存的物品视为放弃，甲方可自行处置。"]}),this.articles.push({k:"争议解决",v:["在本协议履行过程中发生无法协商解决的争议时，双方将首选申请仲裁解决。"]})}}var Y=p('<div class="m-1 p-1 print:p-0"><div class=p-1><p class="p-1 print:text-sm">房屋租赁协议</p><article class="p-1 print:text-xs"><span>依据《中华人民共和国民法典》，甲方（出租方）与乙方（承租方）在平等、自愿的基础上， 就位于</span><span class="underline underline-offset-4"></span><span>的房屋租赁达成以下协议：</span></article><section class="p-1 grid gap-1 grid-cols-1 sm:grid-cols-2"><div class=print:text-xs></div><div class=print:text-xs></div></section></div><section class="p-1 print:text-xs"><p class=p-1></p></section><section class="hidden print:block text-xs"><p class=p-2>本协议一式两份，甲乙双方各执一份，具有同等法律效力。</p><div class="p-1 grid gap-1 grid-cols-1 sm:grid-cols-2"><div class=col-span-1><p class="p-1 text-nowrap">甲方手机: </p><p class="p-1 text-nowrap">甲方签字: </p><p class="p-1 text-nowrap">签字日期: </p></div><div class=col-span-1><p class="p-1 text-nowrap">乙方手机: </p><p class="p-1 text-nowrap">乙方签字: </p><p class="p-1 text-nowrap">签字日期: '),Z=p('<article class="flex flex-row gap-1 print:text-xs"><p class="p-1 min-w-5">.</p><div><p class=p-1>'),tt=p("<div class=px-1>");const et=l=>{const t=new X(l.lease);return(()=>{var a=Y(),n=a.firstChild,r=n.firstChild,c=r.nextSibling,d=c.firstChild,u=d.nextSibling,h=c.nextSibling,e=h.firstChild,o=e.nextSibling,v=n.nextSibling,V=v.firstChild,E=v.nextSibling,N=E.firstChild,A=N.nextSibling,x=A.firstChild,y=x.firstChild;y.firstChild;var T=x.nextSibling,_=T.firstChild;return _.firstChild,s(u,()=>l.fAddr),s(e,i(F,{get val(){return l.lease.lessor},tag:"甲方"})),s(o,i(F,{get val(){return l.lease.lessee},tag:"乙方"})),s(n,i(S,{get each(){return t.articles},children:(C,I)=>(()=>{var b=Z(),$=b.firstChild,L=$.firstChild,w=$.nextSibling,M=w.firstChild;return s($,()=>I()+1,L),s(M,()=>C.k),s(w,i(S,{get each(){return C.v},children:O=>(()=>{var k=tt();return s(k,O),k})()}),null),b})()}),null),s(V,()=>l.lease.extrall),s(y,()=>l.lease.lessor.phone,null),s(_,()=>l.lease.lessee.phone,null),a})()},st=et;var lt=p('<p class="px-2 py-1 absolute top-2 left-8">租赁协议'),it=p('<p class="px-4 py-2">'),nt=p('<nav class="absolute top-2 right-2 flex-row-vcenter print:hidden">'),rt=p('<div><nav class="absolute top-2 right-2 flex-row-vcenter print:hidden">');const ut=()=>{const l=P(),[t,a]=f(),[n,r]=f(),[c,d]=f(!1),u=()=>{const e=new B(n());return e.isValid()&&!e.isEqual(t().lease)},h=()=>{const e={...t(),lease:new B(n()).entity};J(Number.parseInt(l.fid),e).then(()=>{a(e),d(!1)}).catch(o=>console.error("upsert flat failed",o))};return q(()=>{l.fid&&D(Number.parseInt(l.fid)).then(e=>{a(e),r(e==null?void 0:e.lease)}).catch(e=>console.error("get flat failed",e))}),[lt(),i(g,{get when(){return j(()=>!!t())()&&t().lease},get children(){return i(g,{get when(){return c()},get fallback(){return(()=>{var e=rt(),o=e.firstChild;return s(e,i(st,{get lease(){return t().lease},get fAddr(){return t().address}}),o),s(o,i(z,{label:"修改",onClick:()=>d(!0)})),e})()},get children(){return[(()=>{var e=it();return s(e,()=>t().address),e})(),i(W,{get val(){return n()},cb:e=>r(e)}),(()=>{var e=nt();return s(e,i(g,{get when(){return u()},get children(){return i(G,{label:"保存",onClick:()=>h()})}}),null),s(e,i(H,{label:"取消",onClick:()=>d(!1)}),null),e})()]}})}})]};export{ut as default};
