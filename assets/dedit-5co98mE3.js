import{u as h,a as v,c,o as w,g as $,b as s,i as f,S as u,B as y,d as x,t as r,s as _}from"./index-YcIw2Huw.js";import{l as k,E as C,T as p}from"./dedit-DxgKloju.js";import"./checkset-Ds8Ko24I.js";var B=r('<p class="px-2 py-1 absolute top-2 left-8">编辑租赁协议'),E=r('<p class="mx-2 my-1 px-2 py-1">'),L=r('<nav class="absolute top-2 right-2 flex-row-vcenter">'),N=r('<div class="m-2 p-2 flex items-center justify-center">Loading ...');const T=()=>{const t=h(),n=v(),[a,i]=c(),[l,d]=c(),m=()=>{if(a()){const e=new p(a());return e.isValid()&&!e.isEqual(l().lease)}else return!1},o=e=>{if(e){const g={...l(),lease:new p(a()).entity};_(Number.parseInt(t.fid),g).then(()=>{n(`/${t.fid}/lvw`,{replace:!0,state:{t:"租赁协议"}})}).catch(b=>console.error("upsert flat failed",b))}else n(`/${t.fid}/lvw`,{replace:!0,state:{t:"租赁协议"}})};return w(()=>{t.fid&&$(Number.parseInt(t.fid)).then(e=>{d(e),e&&(e.lease||(e.lease=k),i(e.lease))}).catch(e=>console.error("get flat failed",e))}),[B(),s(u,{get when(){return a()},get fallback(){return N()},get children(){return[(()=>{var e=E();return f(e,()=>l().address),e})(),s(C,{get val(){return a()},cb:e=>i(e)}),(()=>{var e=L();return f(e,s(u,{get when(){return m()},get fallback(){return s(y,{label:"取消",onClick:()=>o(!1)})},get children(){return s(x,{label:"保存",onClick:()=>o(!0)})}})),e})()]}})]};export{T as default};
