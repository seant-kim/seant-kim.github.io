import{u as h,a as v,c,o as w,g as y,b as a,i as u,S as f,B as $,d as x,t as r,s as _}from"./index-YcIw2Huw.js";import{b as k,E as B,T as p}from"./dedit-Bx2Rdovw.js";import"./checkset-Ds8Ko24I.js";var C=r('<p class="px-2 py-1 absolute top-2 left-8">编辑买卖协议'),S=r('<p class="mx-2 my-1 px-2 py-1">'),E=r('<nav class="absolute top-2 right-2 flex-row-vcenter">'),N=r('<div class="m-2 p-2 flex items-center justify-center">Loading ...');const j=()=>{const t=h(),n=v(),[s,o]=c(),[l,d]=c(),b=()=>{if(s()){const e=new p(s());return e.isValid()&&!e.isEqual(l().bsell)}else return!1},i=e=>{if(e){const m={...l(),bsell:new p(s()).entity};_(Number.parseInt(t.fid),m).then(()=>{n(`/${t.fid}/bvw`,{replace:!0,state:{t:"买卖协议"}})}).catch(g=>console.error("upsert flat failed",g))}else n(`/${t.fid}/bvw`,{replace:!0,state:{t:"买卖协议"}})};return w(()=>{t.fid&&y(Number.parseInt(t.fid)).then(e=>{d(e),e&&(e.bsell||(e.bsell=k),o(e.bsell))}).catch(e=>console.error("get flat failed",e))}),[C(),a(f,{get when(){return s()},get fallback(){return N()},get children(){return[(()=>{var e=S();return u(e,()=>l().address),e})(),a(B,{get val(){return s()},cb:e=>o(e)}),(()=>{var e=E();return u(e,a(f,{get when(){return b()},get fallback(){return a($,{label:"取消",onClick:()=>i(!1)})},get children(){return a(x,{label:"保存",onClick:()=>i(!0)})}})),e})()]}})]};export{j as default};
